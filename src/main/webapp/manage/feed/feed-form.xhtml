<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html">

<h:form id="feed" styleClass="form-horizontal">
<div class="row">
	<div class="large-24 columns required">
		<h:outputLabel for="url" value="#{msg['management.feed.url']}:"
					   styleClass="#{!url.valid ? 'error' : ''}"/>
	</div>
</div>
<div class="row">
	<div class="large-18 columns">
		<h:inputText id="url" value="#{feedController.feedToUpdate.remoteLink}" binding="#{url}"
					 label="#{msg['management.feed.url']}" styleClass="#{!url.valid ? 'error' : ''}">
			<f:validateBean/>
		</h:inputText>
		<h:message for="url" errorClass="error"/>
	</div>
	<div class="large-6 columns">
		<h:commandLink id="retrieveFeed" action="#{feedController.retrieveFeed}" styleClass="button expand">
			<f:param name="URL_ONLY" value="true"/>
			<i class="fa fa-download"></i>
			#{msg['management.feed.url.getfeed']}
		</h:commandLink>
	</div>
</div>

<div style="#{(url.valid and url.value.length() &gt; 0) ? '' : 'display: none' }">
	<div class="row">
		<div class="large-24 columns required">
			<h:outputLabel for="name" value="#{msg['management.feed.name']}:"
						   styleClass="#{!name.valid ? 'error' : ''}"/>
		</div>
	</div>
	<div class="row">
		<div class="large-12 columns">
			<f:validateBean disabled="#{param['URL_ONLY']}">
				<h:inputText id="name" value="#{feedController.feedToUpdate.name}" binding="#{name}"
							 styleClass="#{!name.valid ? 'error' : ''}"
							 label="#{msg['management.feed.name']}"/>
			</f:validateBean>
			<h:message for="name" errorClass="error"/>
		</div>
		<div class="large-12 columns">
			<p class="help-block">
				<h:outputText value="#{msg['management.feed.name.desc']}"/>
			</p>
		</div>
	</div>

	<div class="required">
		<div class="row">
			<div class="large-24 columns">
				<h:outputLabel for="title" value="#{msg['management.feed.title']}:"
							   styleClass="#{!title.valid ? 'error' : ''}"/>
			</div>
		</div>
		<div class="row">
			<div class="large-12 columns">
				<f:validateBean disabled="#{param['URL_ONLY']}">
					<h:inputText id="title" value="#{feedController.feedToUpdate.title}" binding="#{title}"
								 styleClass="#{!title.valid ? 'error' : ''}"
								 label="#{msg['management.feed.title']}"/>
				</f:validateBean>
				<h:message for="title" errorClass="error"/>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="large-24 columns required">
			<h:outputLabel for="author" value="#{msg['management.feed.author']}:"
						   styleClass="#{!author.valid ? 'error' : ''}"/>
		</div>
	</div>
	<div class="row">
		<div class="large-12 columns">
			<f:validateBean disabled="#{param['URL_ONLY']}">
				<h:inputText id="author" class="feed-author" value="#{feedController.feedToUpdate.author}"
							 binding="#{author}"
							 styleClass="#{!author.valid ? 'error' : ''}"
							 label="#{msg['management.feed.author']}"/>
			</f:validateBean>
			<h:message for="author" errorClass="error"/>
		</div>
	</div>

	<div class="row">
		<div class="large-24 columns">

			<h:outputLabel for="authorJbossUsername" value="#{msg['management.feed.authorJbossUsername']}:"
						   styleClass="#{!authorJbossUsername.valid ? 'error' : ''}"/>
		</div>
	</div>
	<div class="row">
		<div class="large-12 columns">
			<f:validateBean disabled="#{param['URL_ONLY']}">
				<h:inputText id="authorJbossUsername"
							 value="#{feedController.feedToUpdate.authorJbossUsername}"
							 binding="#{authorJbossUsername}"
							 styleClass="#{!authorJbossUsername.valid ? 'error' : ''}"
							 label="#{msg['management.feed.authorJbossUsername']}"/>
			</f:validateBean>
			<h:message for="authorJbossUsername" errorClass="error"/>
		</div>
	</div>

	<div class="row">
		<div class="large-24 columns">
			<h:outputLabel for="authorAvatarLink" value="#{msg['management.feed.authorAvatarLink']}:"
						   styleClass="#{!authorAvatarLink.valid ? 'error' : ''}"/>
		</div>
	</div>
	<div class="row">
		<div class="large-12 columns">
			<f:validateBean disabled="#{param['URL_ONLY']}">
				<h:inputText id="authorAvatarLink" value="#{feedController.feedToUpdate.authorAvatarLink}"
							 binding="#{authorAvatarLink}"
							 styleClass="#{!authorAvatarLink.valid ? 'error' : ''}"
							 label="#{msg['management.feed.authorAvatarLink']}"/>
			</f:validateBean>
			<h:message for="authorAvatarLink" errorClass="error"/>
		</div>
		<div class="large-12 columns">
			<p class="help-block">
				<h:outputText value="#{msg['management.feed.authorAvatarLink.desc']}"/>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="large-24 columns required">
			<h:outputLabel for="group" value="#{msg['management.feed.group']}:"
						   styleClass="#{!group.valid ? 'error' : ''}"/>
		</div>
	</div>
	<div class="row">
		<div class="large-12 columns">
			<f:validateBean disabled="#{param['URL_ONLY']}">
				<h:selectOneMenu id="group" value="#{feedController.feedToUpdate.group}"
								 converter="#{groupConverter}"
								 label="#{msg['management.feed.group']}" binding="#{group}"
								 styleClass="#{!group.valid ? 'error' : ''}">
					<f:selectItems value="#{groups}" var="g" itemValue="#{g}" itemLabel="#{g.displayName}"/>
				</h:selectOneMenu>
			</f:validateBean>
			<h:message for="group" errorClass="error"/>
		</div>
	</div>

	<div class="row">
		<div class="large-24 columns required">
			<h:outputLabel for="postAuthorType" value="#{msg['management.feed.postAuthorType']}:"
						   styleClass="#{!postAuthorType.valid ? 'error' : ''}"/>
		</div>
	</div>
	<div class="row">
		<div class="large-12 columns">
			<f:validateBean disabled="#{param['URL_ONLY']}">
				<h:selectOneMenu id="postAuthorType" value="#{feedController.feedToUpdate.postAuthorType}"
								 converter="#{postAuthorTypeConverter}"
								 label="#{msg['management.feed.postAuthorType']}"
								 binding="#{postAuthorType}"
								 styleClass="#{!postAuthorType.valid ? 'error' : ''}">
					<f:selectItems value="#{postAuthorTypeConverter.options}"/>
				</h:selectOneMenu>
			</f:validateBean>
			<h:message for="postAuthorType" styleClass="error"/>
		</div>
	</div>

	<div class="row">
		<div class="large-24 columns">
			<h:outputLabel for="includeCategory" value="#{msg['management.feed.includeCategory']}:"
						   styleClass=""/>
		</div>
	</div>
	<div class="row">
		<ui:fragment rendered="#{formType == 'create' and url.value.length() > 0}">
			<div class="large-12 columns">
				<h:selectOneMenu id="includeCategory" value="#{feedController.includeCategory}"
								 label="#{msg['management.feed.includeCategory']}" styleClass="">
					<f:selectItems value="#{feedCategoriesHolder.categories}"/>
					<f:validateBean disabled="true"/>
				</h:selectOneMenu>
				<h:message for="includeCategory" styleClass="error"/>
			</div>
		</ui:fragment>
		<ui:fragment rendered="#{formType == 'update'}">
			<div class="large-12 columns">
				<h:inputText id="includeCategoryRegexp"
							 value="#{feedController.feedToUpdate.includeCategoryRegexp}"
							 binding="#{includeCategoryRegexp}"
							 label="#{msg['management.feed.includeCategory']}"/>
				<h:message for="includeCategoryRegexp" styleClass="error"/>
			</div>
			<div class="large-12 columns">
				<p class="help-block">
					<h:outputText value="#{msg['management.feed.includeCategory.regexp.desc']}"/>
				</p>
			</div>
		</ui:fragment>
	</div>
</div>

<ui:fragment rendered="#{userController.admin and formType != 'create'}">
	<div class="row">
		<div class="large-24 columns required">
			<h:outputLabel for="status" value="#{msg['management.feed.status']}:"
						   styleClass="#{!status.valid ? 'error' : ''}"/>
		</div>
	</div>
	<div class="row">
		<div class="large-12 columns">
			<f:validateBean disabled="#{param['URL_ONLY']}">
				<h:selectOneMenu id="status" value="#{feedController.feedToUpdate.status}"
								 converter="#{feedStatusConverter}"
								 label="#{msg['management.feed.status']}" binding="#{status}"
								 styleClass="#{!status.valid ? 'error' : ''}">
					<f:selectItems value="#{feedStatusConverter.options}"/>
				</h:selectOneMenu>
			</f:validateBean>
			<h:message for="status" styleClass="error"/>
		</div>
	</div>
</ui:fragment>
<div class="form-actions" style="#{(url.valid and url.value.length() &gt; 0) ? '' : 'display: none' }">
	<p></p>
	<div class="row">
		<div class="large-24 columns">
			<h:commandLink action="#{feedController.update}" styleClass="button">
				<f:param name="URL_ONLY" value="false"/>
				<i class="fa fa-check"></i>
				#{msg['management.feed.submit']}
			</h:commandLink>
			<h:link value="#{msg['management.feed.back']}" outcome="/manage/feed/list.jsf" styleClass="button blue"/>
		</div>
	</div>
</div>

</h:form>
</ui:composition>
