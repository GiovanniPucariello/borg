<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
				template="../../layout/template.xhtml">

<f:metadata>
	<f:event listener="#{userController.checkIsAdmin}" type="preRenderView"/>
</f:metadata>

<ui:param name="pageId" value="edit-config"/>
<ui:param name="section" value="management"/>

<ui:define name="header">
	#{msg['management.config.edit']}
</ui:define>

<ui:define name="breadcrumb">
	<ui:include src="../breadcrumb.xhtml"/>
</ui:define>

<ui:define name="page_title">#{msg['management.config.edit']}
	<ui:include src="/layout/page-title-suffix.xhtml"/>
</ui:define>

<ui:define name="body">

	<h:form id="feed">
		<h:inputHidden value="#{configurationController.config.id}" id="id"/>
		<f:validateBean>
			<div class="row">
				<div class="large-12 columns">
					<h3>
						<h:outputText value="#{msg['management.config.global.name']}"/>
					</h3>

					<div class="row collapse required">
						<h:outputLabel for="readTimeout" value="#{msg['management.config.readTimeout']}:"
									   styleClass="#{!readTimeout.valid ? 'error' : ''}"/>

						<div class="small-22 columns">
							<h:inputText id="readTimeout" styleClass="#{!readTimeout.valid ? 'error' : ''}"
										 value="#{configurationController.config.readTimeout}"
										 binding="#{readTimeout}"
										 label="#{msg['management.config.readTimeout']}" required="true"/>

							<h:message for="readTimeout" errorClass="error"/>
						</div>
						<div class="small-2 columns">
								<span class="postfix radius #{!readTimeout.valid ? 'error' : ''}">
									#{msg['management.config.append.ms']}
								</span>
						</div>
					</div>

					<div class="row collapse required">
						<h:outputLabel for="connectionTimeout"
									   value="#{msg['management.config.connectionTimeout']}:"
									   styleClass="#{!connectionTimeout.valid ? 'error' : ''}"/>

						<div class="small-22 columns">
							<h:inputText id="connectionTimeout"
										 styleClass="#{!connectionTimeout.valid ? 'error' : ''}"
										 value="#{configurationController.config.connectionTimeout}"
										 binding="#{connectionTimeout}"
										 label="#{msg['management.config.connectionTimeout']}" required="true"/>
							<h:message for="connectionTimeout" errorClass="error"/>
						</div>
						<div class="small-2 columns">
							<span class="postfix radius #{!connectionTimeout.valid ? 'error' : ''}">#{msg['management.config.append.ms']}</span>
						</div>
					</div>

					<div class="row collapse required">
						<h:outputLabel for="updateInterval" value="#{msg['management.config.updateInterval']}:"
									   styleClass="#{!updateInterval.valid ? 'error' : ''}"/>

						<div class="small-22 columns">
							<h:inputText id="updateInterval" styleClass="#{!updateInterval.valid ? 'error' : ''}"
										 value="#{configurationController.config.updateInterval}"
										 binding="#{updateInterval}"
										 label="#{msg['management.config.updateInterval']}" required="true"/>
							<h:message for="updateInterval" errorClass="error"/>
						</div>
						<div class="small-2 columns">
							<span class="postfix radius #{!updateInterval.valid ? 'error' : ''}">#{msg['management.config.append.sec']}</span>
						</div>
					</div>

					<div class="row collapse">
						<h:outputLabel for="updateFeedFailsThreshold"
									   value="#{msg['management.config.updateFeedFailsThreshold']}:"
									   styleClass="#{!updateFeedFailsThreshold.valid ? 'error' : ''}"/>
						<h:inputText id="updateFeedFailsThreshold"
									 styleClass="#{!updateFeedFailsThreshold.valid ? 'error' : ''}"
									 value="#{configurationController.config.updateFeedFailsThreshold}"
									 binding="#{updateFeedFailsThreshold}"
									 label="#{msg['management.config.updateFeedFailsThreshold']}"/>
						<h:message for="updateFeedFailsThreshold" errorClass="error"/>

						<p class="help-block">
							<h:outputText value="#{msg['management.config.updateFeedFailsThreshold.desc']}"/>
						</p>
					</div>


					<div class="row collapse required">
						<h:outputLabel for="adminEmail" value="#{msg['management.config.adminEmail']}:"
									   styleClass="#{!adminEmail.valid ? 'error' : ''}"/>

						<h:inputText id="adminEmail" value="#{configurationController.config.adminEmail}"
									 binding="#{adminEmail}" styleClass="#{!adminEmail.valid ? 'error' : ''}"
									 label="#{msg['management.config.adminEmail']}" required="true"/>
						<h:message for="adminEmail" errorClass="error"/>
					</div>
					<div class="row collapse required">
						<h:outputLabel for="themeUrl" value="#{msg['management.config.themeUrl']}:"
									   styleClass="#{!themeUrl.valid ? 'error' : ''}"/>
						<div class="small-3 columns">
								<span class="prefix radius #{!themeUrl.valid ? 'error' : ''}">
									#{msg['management.config.preppend.https']}
								</span>
						</div>
						<div class="small-21 columns">
							<h:inputText id="themeUrl" value="#{configurationController.config.themeUrl}"
										 binding="#{themeUrl}" styleClass="#{!themeUrl.valid ? 'error' : ''}"
										 label="#{msg['management.config.themeUrl']}" required="true"/>
							<h:message for="themeUrl" errorClass="error"/>
						</div>
					</div>
					<div class="row collapse">
						<h:outputLabel for="searchQuery" value="#{msg['management.config.searchQuery']}:"
									   styleClass="#{!searchQuery.valid ? 'error' : ''}"/>
						<h:inputText id="searchQuery" value="#{configurationController.config.searchQuery}"
									 binding="#{searchQuery}" styleClass="#{!searchQuery.valid ? 'error' : ''}"
									 label="#{msg['management.config.searchQuery']}"/>
						<h:message for="searchQuery" errorClass="error"/>
					</div>
				</div>

				<div class="large-12 columns">
					<h3>
						<h:outputText value="#{msg['management.config.sync.name']}"/>
					</h3>

					<div class="row collapse">
						<h:outputLabel for="syncServer" value="#{msg['management.config.syncServer']}:"
									   styleClass="#{!syncServer.valid ? 'error' : ''}"/>

						<h:inputText id="syncServer" value="#{configurationController.config.syncServer}"
									 binding="#{syncServer}" styleClass="#{!syncServer.valid ? 'error' : ''}"
									 label="#{msg['management.config.syncServer']}"/>
						<h:message for="syncServer" errorClass="error"/>
					</div>

					<div class="row collapse">
						<h:outputLabel for="syncServerUsername"
									   value="#{msg['management.config.syncServerUsername']}:"
									   styleClass="#{!syncServerUsername.valid ? 'error' : ''}"/>

						<h:inputText id="syncServerUsername"
									 styleClass="#{!syncServerUsername.valid ? 'error' : ''}"
									 value="#{configurationController.config.syncUsername}"
									 binding="#{syncServerUsername}"
									 label="#{msg['management.config.syncServerUsername']}"/>
						<h:message for="syncServerUsername" errorClass="error"/>
					</div>

					<div class="row collapse">
						<h:outputLabel for="syncServerPassword"
									   value="#{msg['management.config.syncServerPassword']}:"
									   styleClass="#{!syncServerPassword.valid ? 'error' : ''}"/>

						<h:inputSecret id="syncServerPassword"
									   styleClass="#{!syncServerPassword.valid ? 'error' : ''}"
									   value="#{configurationController.config.syncPassword}"
									   binding="#{syncServerPassword}"
									   label="#{msg['management.config.syncServerPassword']}"/>
						<h:message for="syncServerPassword" errorClass="error"/>

						<p class="help-block">
							<h:outputText value="#{msg['management.config.syncServerPassword.desc']}"/>
						</p>
					</div>

					<div class="row collapse">
						<h:outputLabel for="syncContentType" value="#{msg['management.config.syncContentType']}:"
									   styleClass="#{!syncContentType.valid ? 'error' : ''}"/>

						<h:inputText id="syncContentType"
									 value="#{configurationController.config.syncContentType}"
									 binding="#{syncContentType}"
									 label="#{msg['management.config.syncContentType']}"/>
						<h:message for="syncContentType" errorClass="error"/>
					</div>

					<div class="row collapse">
						<h:outputLabel for="syncServerHttpInViewLayer"
									   value="#{msg['management.config.syncServerHttpInViewLayer']}:"
									   styleClass="left #{!syncServerHttpInViewLayer.valid ? 'error' : ''}"/>
						&#160;
						<h:selectBooleanCheckbox id="syncServerHttpInViewLayer"
												 value="#{configurationController.config.syncServerHttpInViewLayer}"
												 binding="#{syncServerHttpInViewLayer}"
												 label="#{msg['management.config.syncServerHttpInViewLayer']}"
												 styleClass=""/>
						<h:message for="syncServerHttpInViewLayer" errorClass="error"/>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="large-12 columns">
					<h3>
						<h:outputText value="#{msg['management.config.twitter.name']}"/>
					</h3>

					<div class="row collapse">
						<h:outputLabel for="twitterEnabled" value="#{msg['management.config.twitterEnabled']}:"
									   styleClass="#{!twitterEnabled.valid ? 'error' : ''}"/>

						<h:selectOneRadio id="twitterEnabled" value="#{configurationController.config.twitterEnabled}"
									 binding="#{twitterEnabled}" styleClass="#{!twitterEnabled.valid ? 'error' : ''}"
									 label="#{msg['management.config.twitterEnabled']}">
							<f:selectItem itemValue="true" itemLabel="#{msg['management.config.twitterEnabled.true']}" />
							<f:selectItem itemValue="false" itemLabel="#{msg['management.config.twitterEnabled.false']}" />
						</h:selectOneRadio>

						<h:message for="twitterEnabled" errorClass="error"/>
					</div>

					<div class="row collapse">
						<h:outputLabel for="twitterPublishDateThresholdInHours" value="#{msg['management.config.twitterPublishDateThresholdInHours']}:"
									   styleClass="#{!twitterPublishDateThresholdInHours.valid ? 'error' : ''}"/>

						<h:inputText id="twitterPublishDateThresholdInHours" value="#{configurationController.config.twitterPublishDateThresholdInHours}"
									 binding="#{twitterPublishDateThresholdInHours}" styleClass="#{!twitterPublishDateThresholdInHours.valid ? 'error' : ''}"/>
						<h:message for="twitterPublishDateThresholdInHours" errorClass="error"/>

						<p>
							<h:outputText value="#{msg['management.config.twitterPublishDateThresholdInHours.desc']}"/>
						</p>
					</div>

					<div class="row collapse">
						<h:outputLabel for="twitterOAuthConsumerKey" value="#{msg['management.config.twitterOAuthConsumerKey']}:"
									   styleClass="#{!twitterOAuthConsumerKey.valid ? 'error' : ''}"/>

						<h:inputText id="twitterOAuthConsumerKey" value="#{configurationController.config.twitterOAuthConsumerKey}"
									 binding="#{twitterOAuthConsumerKey}" styleClass="#{!twitterOAuthConsumerKey.valid ? 'error' : ''}"
									 label="#{msg['management.config.twitterOAuthConsumerKey']}"/>
						<h:message for="twitterOAuthConsumerKey" errorClass="error"/>
					</div>

					<div class="row collapse">
						<h:outputLabel for="twitterOAuthConsumerSecret" value="#{msg['management.config.twitterOAuthConsumerSecret']}:"
									   styleClass="#{!twitterOAuthConsumerSecret.valid ? 'error' : ''}"/>

						<h:inputText id="twitterOAuthConsumerSecret" value="#{configurationController.config.twitterOAuthConsumerSecret}"
									 binding="#{twitterOAuthConsumerSecret}" styleClass="#{!twitterOAuthConsumerSecret.valid ? 'error' : ''}"
									 label="#{msg['management.config.twitterOAuthConsumerSecret']}"/>
						<h:message for="twitterOAuthConsumerSecret" errorClass="error"/>
					</div>

					<div class="row collapse">
						<h:outputLabel for="twitterOAuthAccessToken" value="#{msg['management.config.twitterOAuthAccessToken']}:"
									   styleClass="#{!twitterOAuthAccessToken.valid ? 'error' : ''}"/>

						<h:inputText id="twitterOAuthAccessToken" value="#{configurationController.config.twitterOAuthAccessToken}"
									 binding="#{twitterOAuthAccessToken}" styleClass="#{!twitterOAuthAccessToken.valid ? 'error' : ''}"
									 label="#{msg['management.config.twitterOAuthAccessToken']}"/>
						<h:message for="twitterOAuthAccessToken" errorClass="error"/>
					</div>

					<div class="row collapse">
						<h:outputLabel for="twitterOAuthAccessTokenSecret" value="#{msg['management.config.twitterOAuthAccessTokenSecret']}:"
									   styleClass="#{!twitterOAuthAccessTokenSecret.valid ? 'error' : ''}"/>

						<h:inputText id="twitterOAuthAccessTokenSecret" value="#{configurationController.config.twitterOAuthAccessTokenSecret}"
									 binding="#{twitterOAuthAccessTokenSecret}" styleClass="#{!twitterOAuthAccessTokenSecret.valid ? 'error' : ''}"
									 label="#{msg['management.config.twitterOAuthAccessTokenSecret']}"/>
						<h:message for="twitterOAuthAccessTokenSecret" errorClass="error"/>
					</div>

					<div class="row collapse">
						<h:outputLabel for="twitterText" value="#{msg['management.config.twitterText']}:"
									   styleClass="#{!twitterText.valid ? 'error' : ''}"/>

						<h:inputText id="twitterText" value="#{configurationController.config.twitterText}"
									 binding="#{twitterText}" styleClass="#{!twitterText.valid ? 'error' : ''}"
									 label="#{msg['management.config.twitterEnabled']}"/>
						<h:message for="twitterText" errorClass="error"/>

						<p class="help-block">
							<h:outputText value="#{msg['management.config.twitterText.desc']}"/>
						</p>
					</div>










				</div>
			</div>
		</f:validateBean>

		<div class="row">
			<div class="large-24 columns">

				<h:commandLink action="#{configurationController.update}" styleClass="button green">
					<i class="fa fa-check"></i>
					#{msg['common.submit']}
				</h:commandLink>
				<h:link value="#{msg['common.back']}" outcome="/manage/index.jsf" styleClass="button blue"/>
			</div>
		</div>
	</h:form>

</ui:define>

</ui:composition>
